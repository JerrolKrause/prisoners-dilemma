"use strict";(self.webpackChunkangular_starter=self.webpackChunkangular_starter||[]).push([[126],{4126:(V,c,a)=>{a.r(c),a.d(c,{LoginModule:()=>I});var f=a(2619),u=a(4182),p=a(6814),s=a(95),h=a(4532),v=a(7161),g=a(4887),e=a(9212),Z=a(7780),w=a(5219),b=a(4152),y=a(4567),U=a(3081);function T(t,i){1&t&&e._UZ(0,"p-message",16)}function S(t,i){1&t&&e._UZ(0,"p-message",17)}function x(t,i){if(1&t&&e.YNc(0,T,1,0,"p-message",16)(1,S,1,0,"p-message",17),2&t){const o=e.oxw();e.um2(0,i===o.authStateType.sessionExpired?0:-1),e.xp6(1),e.um2(1,i===o.authStateType.loggedOut?1:-1)}}function M(t,i){1&t&&e._UZ(0,"p-message",4)}const C=t=>({"p-focus":t}),L=t=>({"btn-waiting":t}),d="savedUserName",A=g.Bz.forChild([{path:"",component:(()=>{class t{constructor(o,n,r,l,m){this.authService=o,this.route=n,this.router=r,this.fb=l,this.dom=m,this.formMain=this.fb.group({userName:new s.FormControl("juser",{validators:s.Validators.required,nonNullable:!0}),password:new s.FormControl("password",{validators:s.Validators.required,nonNullable:!0}),remember:new s.FormControl(!1,{nonNullable:!0})}),this.state=(0,e.tdS)({waiting:!1,error:null,showErrorDetails:!1,loggedout:!1,showPassword:!0}),this.authState$=this.authService.authState$,this.authStateType=u.jq}ngOnInit(){const o=this.dom.localStorage?.getItem(d);o&&this.formMain.patchValue({userName:o,remember:!0}),this.authService.logOutModal=null}onLogin(){this.state.update(o=>({...o,waiting:!0,error:null,showErrorDetails:!1})),this.formMain&&this.formMain.value.remember?this.dom.localStorage?.setItem(d,this.formMain.value.userName||""):this.dom.localStorage?.removeItem(d),this.authService.logIn(this.formMain.value).subscribe(()=>{this.router.navigate([this.route.snapshot.queryParams.returnUrl||"/"]),this.state.update(n=>({...n,waiting:!1}))},o=>{o.errorMsg="Error logging in.",(o.statusText="Unauthorized")&&(o.errorMsg="Invalid username or password, please try again.",this.state.update(n=>({...n,showErrorDetails:!1}))),this.state.update(n=>({...n,error:o,waiting:!1}))})}ngOnDestroy(){}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(u.e8),e.Y36(g.gz),e.Y36(g.F0),e.Y36(s.NonNullableFormBuilder),e.Y36(Z.vo))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:30,vars:15,consts:[[1,"container","mt-5"],[1,"m-auto",2,"max-width","480px"],["novalidate","",3,"formGroup","ngSubmit"],["icon","user"],["severity","error","text","Unable to log in, please check your username and password"],[1,"mb-4"],[1,"p-float-label","mb-4",3,"ngClass"],["id","userName","type","text","size","30","pInputText","","formControlName","userName",1,"w-100","p-inputtext","p-corner-all","p-state-default","p-widget"],["for","userName"],["id","password","type","password","size","30","pInputText","","formControlName","password",1,"w-100","p-inputtext","p-corner-all","p-state-default","p-widget"],["for","password"],[1,"form-check-label"],["type","checkbox","formControlName","remember",1,"form-check-input","remember"],[1,"text-end"],["type","submit",1,"btn","btn-primary",3,"disabled","ngClass"],["icon","power-off",1,"me-2"],["severity","warn","styleClass","w-100 mb-3","text","Session expired, please log in again"],["severity","success","styleClass","w-100 mb-3","text","You have successfully logged out"]],template:function(n,r){if(1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0)(2,"div",1)(3,"form",2),e.NdJ("ngSubmit",function(){return r.onLogin()}),e.TgZ(4,"h1"),e._UZ(5,"app-icons",3),e._uU(6," Please sign in"),e.qZA(),e.TgZ(7,"p-card"),e.YNc(8,x,2,2),e.ALo(9,"async"),e.YNc(10,M,1,0,"p-message",4),e.TgZ(11,"p",5),e._uU(12,"Please enter your username and password."),e.qZA(),e.TgZ(13,"p",6),e._UZ(14,"input",7),e.TgZ(15,"label",8),e._uU(16,"Username"),e.qZA()(),e.TgZ(17,"p",6),e._UZ(18,"input",9),e.TgZ(19,"label",10),e._uU(20,"Password"),e.qZA()(),e.TgZ(21,"label",11),e._UZ(22,"input",12),e._uU(23," Remember my username "),e.qZA(),e.TgZ(24,"p-footer")(25,"div",13)(26,"button",14),e._UZ(27,"app-icons",15),e._uU(28," Sign In "),e.qZA()()()()()()(),e._UZ(29,"app-footer")),2&n){let l,m,N;e.xp6(3),e.Q6J("formGroup",r.formMain),e.xp6(5),e.um2(8,(l=e.lcZ(9,7,r.authState$))?8:-1,l),e.xp6(2),e.um2(10,r.state().error?10:-1),e.xp6(3),e.Q6J("ngClass",e.VKq(9,C,!(null==(m=r.formMain.get("userName"))||!m.value))),e.xp6(4),e.Q6J("ngClass",e.VKq(11,C,!(null==(N=r.formMain.get("userName"))||!N.value))),e.xp6(9),e.Q6J("disabled",r.formMain.invalid||r.state().waiting)("ngClass",e.VKq(13,L,r.state().waiting))}},dependencies:[p.mk,w.$_,s.\u0275NgNoValidate,s.DefaultValueAccessor,s.CheckboxControlValueAccessor,s.NgControlStatus,s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,h.Card,v.q,b.c,y.G,U.IconsComponent,p.Ov],encapsulation:2})}return t})(),data:{title:"Home"}}]);let I=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[p.ez,u.m8,s.FormsModule,s.ReactiveFormsModule,h.CardModule,v.O,A,f.eK,f.Uf]})}return t})()}}]);